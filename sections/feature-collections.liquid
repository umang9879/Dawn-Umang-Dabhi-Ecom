{% comment %}
  Section: cst-collection-slider (Swiper-based)
  - Title block (only one)
  - Card blocks (collection selection, custom image option, layout 1 or 2)
  - Navigation block (only one)
  - Fully namespaced with #section-{{ section.id }} and .cst- prefix
{% endcomment %}

{% assign section_id = section.id | handle %}

<section id="{{ section_id }}" class="cst-section">
  <div class="cst-container">
    {% comment %} Title {% endcomment %}
    {% if section.settings.title_text != blank %}
      <div class="cst-title">{{ section.settings.title_text }}</div>
    {% endif %}
    {% comment %} Slider {% endcomment %}
    {% if section.settings.slider_collections.size > 0 %}
      <div class="cst-slider-container">
        <div class="cst-slider-{{ section_id }}">
          <div class="cst-slider-wrapper">
            {% for collection in section.settings.slider_collections %}
              <div class="cst-slide">
                <div class="cst-card-{{ section.settings.card_type }}">
                  <img
                    src="{{ collection.featured_image | image_url: width: 335, height: 450 }}"
                    alt="{{ collection.featured_image.alt | escape }}"
                    loading="lazy"
                    decoding="async"
                    width="100%"
                    height="auto"
                    class="cst-card-img"
                  />
                  <div class="cst-card-info">
                    <a class="cst-card-link">{{ collection.title }}</a>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "CST Collections Slider",
  "settings": [
    {
      "type": "header",
      "content": "Color Settings"
    },
    {
      "type": "color",
      "label": "Background Color",
      "id": "bg_color",
      "default": "#F5F5F5"
    },
    {
      "type": "header",
      "content": "Title Settings"
    },
    {
      "type": "text",
      "label": "Text",
      "id": "title_text"
    },
    {
      "type": "select",
      "label": "Text Case",
      "id": "title_case",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "capitalize", "label": "Capitalize" },
        { "value": "uppercase", "label": "Uppercase" },
        { "value": "lowercase", "label": "Lowercase" }
      ],
      "default": "uppercase"
    },
    {
      "type": "color",
      "label": "Color",
      "id": "title_color",
      "default": "#30309F"
    },
    {
      "type": "text_alignment",
      "label": "Text alignment",
      "id": "title_alignment",
      "default": "center"
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "collection_list",
      "label": "Select collections",
      "id": "slider_collections",
    },
    {
      "type": "select",
      "id": "card_type",
      "label": "Card type",
      "options": [
        { "value": "big", "label": "Big" },
        { "value": "small", "label": "Small" }
      ],
      "default": "big"
    },
    {
      "type": "number",
      "id": "slider_px",
      "label": "Padding X - desktop",
      "default": 64
    },
    {
      "type": "number",
      "id": "slider_px_mobile",
      "label": "Padding X - mobile",
      "default": 64
    },
    {
      "type": "range",
      "id": "slider_gap",
      "label": "Gap - desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "slider_gap_mobile",
      "label": "Gap - mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 8
    },
  ],
  "presets": [
    {
      "name": "CST Collection Slider"
    }
  ]
}
{% endschema %}
