{% comment %}
  Section: cst-collection-slider (Swiper-based)
  - Title block (only one)
  - Card blocks (collection selection, custom image option, layout 1 or 2)
  - Navigation block (only one)
  - Fully namespaced with #section-{{ section.id }} and .cst- prefix
{% endcomment %}

{% assign section_id = section.id | handle %}

{% style %}
  #{{ section_id }} .cst-container {
    display: flex;
    flex-direction: column;
    gap: 56px;
    padding-block: 96px;
    background-color: {{ section.settings.bg_color }};
  }
  #{{ section_id }} .cst-title {
    display: block;
    width: 100%;
    font-size: 32px;
    line-height: 36px;
    font-weight: 600;
    text-transform: {{ section.settings.title_case }};
    color: {{ section.settings.title_color }};
    text-align: {{ section.settings.title_alignment }};
  }
  #{{ section_id }} .cst-navigation-container {
    display: flex;
    width: 100%;
    justify-content: {{ section.settings.nav_alignment }};
  }
{% endstyle %}

<section id="{{ section_id }}" class="cst-section">
  <div class="cst-container">
    {% comment %} Title {% endcomment %}
    {% if section.settings.title_text != blank %}
      <div class="cst-title">{{ section.settings.title_text }}</div>
    {% endif %}
    {% comment %} Slider {% endcomment %}
    {% if section.settings.slider_collections.size > 0 %}
      <div class="cst-slider-container">
        <div class="cst-slider-{{ section_id }}">
          <div class="cst-slider-wrapper">
            {% for collection in section.settings.slider_collections %}
              <div class="cst-slide">
                <div class="cst-card-{{ section.settings.card_type }}">
                  <img
                    src="{{ collection.featured_image | image_url: width: 335, height: 450 }}"
                    alt="{{ collection.featured_image.alt | escape }}"
                    loading="lazy"
                    decoding="async"
                    width="100%"
                    height="auto"
                    class="cst-card-img"
                  />
                  <div class="cst-card-info">
                    <a class="cst-card-link">{{ collection.title }}</a>
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endif %}
    {% comment %} Slider Navigation {% endcomment %}
    <div class="cst-navigation-container">
      <div class="cst-navigations">
        {% if section.settings.slider_collections.size > 0 %}
          <button class="cst-slider-btn cst-slider-prev-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="16" viewBox="0 0 25 16" fill="none">
              <path d="M0.28125 7.03125L7.03125 0.28125C7.3125 0 7.82812 0 8.10938 0.28125C8.39062 0.5625 8.39062 1.07812 8.10938 1.35938L2.625 6.79688H23.3438C23.7188 6.79688 24.0938 7.17188 24.0938 7.54688C24.0938 7.96875 23.7188 8.29688 23.3438 8.29688H2.625L8.10938 13.7812C8.39062 14.0625 8.39062 14.5781 8.10938 14.8594C7.82812 15.1406 7.3125 15.1406 7.03125 14.8594L0.28125 8.10938C0 7.82812 0 7.3125 0.28125 7.03125Z" fill="#30309F"/>
            </svg>
          </button>
        {% endif %}
        {% if section.settings.nav_btn_label != blank %}
          <a href="{{ section.settings.nav_btn_link | default:"#" }}" class="cst-link-btn cst-link-btn-{{ section.settings.nav_btn_type }}">
            {{ section.settings.nav_btn_label }}
          </a>
        {% endif %}
        {% if section.settings.slider_collections.size > 0 %}
          <button class="cst-slider-btn cst-slider-next-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="16" viewBox="0 0 25 16" fill="none">
              <path d="M23.7656 8.10938L17.0156 14.8594C16.7344 15.1406 16.2188 15.1406 15.9375 14.8594C15.6562 14.5781 15.6562 14.0625 15.9375 13.7812L21.4219 8.29688H0.75C0.328125 8.29688 0 7.96875 0 7.54688C0 7.17188 0.328125 6.79688 0.75 6.79688H21.4219L15.9375 1.35938C15.6562 1.07812 15.6562 0.5625 15.9375 0.28125C16.2188 0 16.7344 0 17.0156 0.28125L23.7656 7.03125C24.0469 7.3125 24.0469 7.82812 23.7656 8.10938Z" fill="#30309F"/>
            </svg>
          </button>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "CST Collections Slider",
  "settings": [
    {
      "type": "header",
      "content": "Color Settings"
    },
    {
      "type": "color",
      "label": "Background Color",
      "id": "bg_color",
      "default": "#F5F5F5"
    },
    {
      "type": "header",
      "content": "Title Settings"
    },
    {
      "type": "text",
      "label": "Text",
      "id": "title_text"
    },
    {
      "type": "select",
      "label": "Text Case",
      "id": "title_case",
      "options": [
        { "value": "none", "label": "None" },
        { "value": "capitalize", "label": "Capitalize" },
        { "value": "uppercase", "label": "Uppercase" },
        { "value": "lowercase", "label": "Lowercase" }
      ],
      "default": "uppercase"
    },
    {
      "type": "color",
      "label": "Color",
      "id": "title_color",
      "default": "#30309F"
    },
    {
      "type": "text_alignment",
      "label": "Text alignment",
      "id": "title_alignment",
      "default": "center"
    },
    {
      "type": "header",
      "content": "Slider Settings"
    },
    {
      "type": "collection_list",
      "label": "Select collections",
      "id": "slider_collections",
    },
    {
      "type": "select",
      "id": "card_type",
      "label": "Card type",
      "options": [
        { "value": "big", "label": "Big" },
        { "value": "small", "label": "Small" }
      ],
      "default": "big"
    },
    {
      "type": "number",
      "id": "slider_slides_per_view",
      "label": "Slides per view - desktop",
      "default": 5
    },
    {
      "type": "number",
      "id": "slider_slides_per_view_mobile",
      "label": "Slides per view - mobile",
      "default": 1
    },
    {
      "type": "number",
      "id": "slider_px",
      "label": "Padding X - desktop",
      "default": 64
    },
    {
      "type": "number",
      "id": "slider_px_mobile",
      "label": "Padding X - mobile",
      "default": 64
    },
    {
      "type": "range",
      "id": "slider_gap",
      "label": "Gap - desktop",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "slider_gap_mobile",
      "label": "Gap - mobile",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "header",
      "content": "Navigation Settings"
    },
    {
      "type": "select",
      "id": "nav_alignment",
      "label": "alignment",
      "options": [
        { "value": "left", "label": "left" },
        { "value": "center", "label": "center" },
        { "value": "right", "label": "right" }
      ],
      "default": "center"
    },
    {
      "type": "color",
      "label": "Color",
      "id": "nav_color",
      "default": "#30309F"
    },
    {
      "type": "checkbox",
      "id": "arrow_show_mobile",
      "label": "Show arrow on mobile",
      "default": true
    },
    {
      "type": "text",
      "label": "Button Label",
      "id": "nav_btn_label",
    },
    {
      "type": "url",
      "label": "Button Link",
      "id": "nav_btn_link"
    },
    {
      "type": "select",
      "id": "nav_btn_type",
      "label": "Button Type",
      "options": [
        { "value": "fill", "label": "Fill" },
        { "value": "outline", "label": "Outline" }
      ],
      "default": "fill"
    },
  ],
  "presets": [
    {
      "name": "CST Collection Slider"
    }
  ]
}
{% endschema %}
